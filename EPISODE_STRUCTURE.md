# Структура эпизода

## Эпизод как минимальная публикуемая единица

**Эпизод** - это минимальная единица публикации для почтовой рассылки.

### Иерархия

```
Роман → Часть → Глава → Эпизод → Сцена
```

**Пример:**
- **Роман:** "Аномалия / Люденс / Игра"
- **Часть:** Часть 1 (Земля)
- **Глава:** Глава 1 (Шторм)
- **Эпизод:** Эпизод 001 "Начало"
- **Сцены:** scene_001.md, scene_002.md

---

## Параметры эпизода

### 1. Длина
- **Минимум:** 10,000 символов
- **Максимум:** 12,000 символов
- **Оптимально:** ~11,000 символов

**Почему 10-12k символов?**
Это комфортная длина для чтения в почтовой рассылке:
- Не слишком коротко (не оставляет ощущение незавершенности)
- Не слишком длинно (можно прочитать за 15-20 минут)

### 2. Количество сцен
- **Минимум:** 1 сцена
- **Максимум:** 3 сцены
- **По необходимости:** сколько нужно для завершенности эпизода

### 3. Завершенность
Каждый эпизод должен:
- Иметь **микро-арку** (начало → развитие → завершение)
- Оставлять интерес к следующему эпизоду
- Быть самодостаточным (можно читать отдельно)

---

## Структура папки эпизода

```
/drafts/episode001/
├── README.md           # Метаданные эпизода
├── scene_001.md       # Сцена 1 (обязательно)
├── scene_002.md       # Сцена 2 (опционально)
└── scene_003.md       # Сцена 3 (опционально)
```

### README.md - метаданные

Каждый эпизод имеет README с обязательной информацией:

```markdown
# Эпизод XXX: [Название]

## Метаданные
- Номер эпизода: XXX
- Название: [Название]
- Часть: [1 или 2]
- Акт: [Номер акта]
- Глава: [Номер главы]
- Длина: ~XX,XXX символов
- Количество сцен: X
- Статус: [Черновик / Готов / Опубликован]
```

Полный шаблон: [/templates/episode_readme_template.md](./templates/episode_readme_template.md)

---

## Типы эпизодов

### 1. Эпизод-действие
Фокус на событиях и действии.

**Пример:**
- Сцена 1: Шторм обрушивается на побережье
- Сцена 2: Цунами приближается к городу
- Сцена 3: Защитное поле появляется

**Структура:**
- Быстрый темп
- Много визуальных деталей
- Напряжение нарастает

### 2. Эпизод-диалог
Фокус на разговорах и раскрытии информации.

**Пример:**
- Сцена 1: Совещание штаба (одна длинная сцена)

**Структура:**
- Медленный темп
- Глубина персонажей
- Раскрытие мотивов

### 3. Эпизод-микс
Комбинация действия и диалога.

**Пример:**
- Сцена 1: Прибытие вертолетов (действие)
- Сцена 2: Первые наблюдения (действие + короткие диалоги)
- Сцена 3: Доклад командованию (диалог)

---

## Workflow написания эпизода

### 1. Планирование

**Определите:**
- Какие события происходят
- Сколько сцен нужно (1-3)
- Какова микро-арка эпизода
- Как эпизод связан с предыдущим и следующим

**Проверьте:**
- [timeline.md](./state/timeline.md) - хронологию
- [investigation_progress.md](./state/investigation_progress.md) - что уже известно
- [character_states.md](./state/character_states.md) - состояния персонажей

### 2. Написание сцен

Создайте сцены в ветке:
```bash
git checkout -b author/yourname/episode005
```

Используйте шаблоны:
- [scene_template.md](./templates/scene_template.md) для каждой сцены

### 3. Сборка эпизода

Создайте README эпизода:
- [episode_readme_template.md](./templates/episode_readme_template.md)

Убедитесь:
- ✅ Длина 10-12k символов
- ✅ 1-3 сцены
- ✅ Эпизод завершен (есть микро-арка)
- ✅ Метаданные заполнены

### 4. Pull Request

Создайте PR:
```bash
git add .
git commit -m "Эпизод 005: [Название]"
git push origin author/yourname/episode005
```

Создайте PR в GitHub с описанием эпизода.

### 5. После апрува

После слияния PR:
- Эпизод попадает в `/drafts/episodeXXX/`
- Автоматически (или вручную) интегрируется в `/drafts/master/`

---

## Проверка перед публикацией

### Чеклист

- [ ] **Длина:** 10,000 - 12,000 символов
- [ ] **Сцены:** 1-3 сцены, все завершены
- [ ] **Метаданные:** README заполнен
- [ ] **Микро-арка:** Эпизод имеет начало, развитие, завершение
- [ ] **Клиффхэнгер:** Есть интрига для следующего эпизода
- [ ] **Консистентность:** Соответствует канону (timeline, character states)
- [ ] **Форматирование:** Markdown корректен
- [ ] **Опечатки:** Проверено на ошибки

### Подсчет символов

```bash
# Подсчитать символы во всех сценах эпизода
cat drafts/episode001/scene_*.md | wc -m
```

---

## Формат для рассылки

### Структура письма

```
Тема: Эпизод XXX: [Название]

[Вступление - опционально, 1-2 абзаца]

---

[Текст сцены 1]

* * *

[Текст сцены 2]

* * *

[Текст сцены 3]

---

[Заключение - опционально, тизер следующего эпизода]

Следующий эпизод: [Дата публикации]
```

### Разделители между сценами

Используйте:
```markdown
* * *
```

Между сценами внутри эпизода.

---

## Маппинг: Эпизоды → Главы → Части

### Часть 1: Земля (~100,000 слов)

**Глава 1: Шторм** (~30,000 слов ≈ 3 эпизода)
- Эпизод 001: Начало
- Эпизод 002: Поле
- Эпизод 003: Первые наблюдения

**Глава 2: Расследование** (~40,000 слов ≈ 3-4 эпизода)
- Эпизод 004: Эвакуация
- Эпизод 005: Формирование группы
- Эпизод 006: Поиск артефактов
- Эпизод 007: Обнаружение "чужих"

**Глава 3: Контакт** (~30,000 слов ≈ 3 эпизода)
- Эпизод 008: Предложение
- Эпизод 009: Первая встреча
- Эпизод 010: Сотрудничество

### Часть 2: Люденс (~100,000 слов)

[Аналогично...]

---

## Связь с /drafts/master/

После завершения эпизода:
1. Эпизод готов в `/drafts/episodeXXX/`
2. Текст копируется в `/drafts/master/partX_xxx/chapterXX.md`
3. Форматируется как часть главы

**Автоматизация (идеально):**
```bash
./scripts/build_master.sh
```

Скрипт автоматически собирает эпизоды в главы.

---

## Примеры эпизодов

### Пример 1: Короткий эпизод (1 сцена)

```markdown
# Эпизод 042: Решение

Метаданные:
- Длина: 10,500 символов
- Сцены: 1

Структура:
- scene_042.md - Совещание штаба, принятие решения о сотрудничестве
```

### Пример 2: Средний эпизод (2 сцены)

```markdown
# Эпизод 001: Начало

Метаданные:
- Длина: 11,200 символов
- Сцены: 2

Структура:
- scene_001.md - Шторм обрушивается (~5,600 символов)
- scene_002.md - Первые жертвы (~5,600 символов)
```

### Пример 3: Длинный эпизод (3 сцены)

```markdown
# Эпизод 002: Поле

Метаданные:
- Длина: 11,900 символов
- Сцены: 3

Структура:
- scene_003.md - Цунами приближается (~4,000 символов)
- scene_004.md - Поле появляется (~4,000 символов)
- scene_005.md - Первые наблюдения (~3,900 символов)
```

---

## Частые ошибки

### ❌ Слишком длинный эпизод
```
Эпизод 015: 15,000 символов
```
**Проблема:** Читатель устанет, письмо слишком длинное.
**Решение:** Разбить на 2 эпизода.

### ❌ Слишком короткий эпизод
```
Эпизод 020: 7,000 символов
```
**Проблема:** Не хватает завершенности.
**Решение:** Добавить сцену или объединить с другим эпизодом.

### ❌ Нет микро-арки
```
Эпизод просто обрывается на полуслове без завершения.
```
**Проблема:** Читатель разочарован.
**Решение:** Каждый эпизод должен иметь мини-завершение (даже если есть клиффхэнгер).

### ❌ Слишком много сцен
```
Эпизод содержит 5 сцен
```
**Проблема:** Теряется фокус, слишком дробно.
**Решение:** Макс. 3 сцены. Остальное - в следующий эпизод.

---

## См. также

- [SCENE_STRUCTURE.md](./SCENE_STRUCTURE.md) - Документация по структуре сцены
- [/drafts/README.md](./drafts/README.md) - Документация по /drafts/
- [/drafts/master/README.md](./drafts/master/README.md) - Книжная версия
- [/templates/episode_readme_template.md](./templates/episode_readme_template.md) - Шаблон README эпизода
