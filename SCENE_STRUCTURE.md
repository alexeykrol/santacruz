# Структура сцены

## Сцена как основная единица

**Сцена** - это основной строительный блок романа, **контейнер** с обязательным набором элементов.

Аналогия: сцена для романа = HTML-элемент для веб-страницы. Каждая сцена содержит структурированные данные и читается **строго последовательно**.

## Обязательные элементы сцены

Каждая сцена ДОЛЖНА содержать:

### 1. Временная метка
**Когда** происходит действие.

Примеры:
- "День 1, 14:30 - момент удара цунами"
- "День 3, утро - эвакуация завершена"
- "Через 6 месяцев после инцидента"
- "Одновременно с событиями на Земле" (для сцен в мире Люденс)

### 2. Мир
**В каком мире** происходит действие.

Варианты:
- `earth_game` - Земля (игровой мир)
- `ludens_realm` - Мир Люденс (администрация)

Ссылка на описание: [/worlds/](./worlds/)

### 3. Сеттинг
**Историко-культурный контекст** (эпоха + география + культура).

Примеры:
- `modern_usa_2025` - Современные США
- `quarantine_zone` - Карантинная зона
- `ludens_administration` - Административные пространства Люденс

Ссылка на описание: [/settings/](./settings/)

### 4. Локация
**Широкое географическое место** (город, регион).

Примеры:
- `Santa Cruz` - город в Калифорнии
- `New York` - Нью-Йорк
- `San Francisco` - Сан-Франциско

Ссылка на описание: [/locations/](./locations/)

### 5. Точка пространства
**Конкретное место**, где происходит сцена (комната, улица, здание).

Примеры:
- `downtown_street_corner` - Угол улицы в центре
- `manhattan_conference_room` - Конференц-зал на Манхэттене
- `temporary_base_tent` - Палатка временной базы

Ссылка на описание: [/spaces/](./spaces/)

### 6. Персонажи (субъекты действия)
**Кто** действует в сцене.

Список персонажей, участвующих в сцене:
- `lead_investigator` - Главный следователь
- `military_commander` - Военный командир
- `senior_officer_kd` - Старший офицер КД

Ссылка на описание: [/entities/characters/](./entities/characters/)

### 7. Объекты
**Что** важно для сюжета в этой сцене.

Только те объекты, которые:
- Упоминаются в тексте
- Видны в "кадре"
- Имеют значение для действия

Примеры:
- `protective_field` - Защитное поле
- `surveillance_drone` - Дрон наблюдения
- `hazmat_suit` - Защитный костюм

**НЕ** перечисляйте все объекты в комнате. Только значимые.

Ссылка на описание: [/entities/objects/](./entities/objects/)

### 8. Действие / Диалог
**Что происходит** в сцене.

Действие может быть:
- **Физическое действие** - персонаж делает что-то
- **Диалог** - персонажи разговаривают (диалог = разновидность действия)
- **Внутренний монолог** - мысли персонажа
- **Комбинация** - действие + диалог

---

## Формат файла сцены

Каждая сцена - это отдельный Markdown файл с метаданными в формате YAML frontmatter:

```markdown
---
scene_id: 001
timestamp: "День 1, 14:30 - момент удара цунами"
world: earth_game
setting: modern_usa_2025
location: Santa Cruz
space: downtown_street_corner
characters:
  - local_cop
  - civilian_witness
objects:
  - police_car
  - debris
  - water_wall
weather: hurricane
---

# Сцена 1: Цунами обрушивается

[Текст сцены с описанием действия и диалогами...]
```

---

## Иерархия реальности

```
Мир → Сеттинг → Локация → Точка пространства → Сцена
```

**Пример:**
- **Мир:** `earth_game` (Земля)
- **Сеттинг:** `modern_usa_2025` (Современные США, 2025)
- **Локация:** `New York` (Нью-Йорк)
- **Точка пространства:** `manhattan_conference_room` (Конференц-зал)
- **Сцена:** Первая встреча землян с представителями КД

---

## Отличие локации от точки пространства

| Понятие | Описание | Примеры |
|---------|----------|---------|
| **Локация** | Широкое географическое место | Нью-Йорк, Санта-Круз, Сан-Франциско |
| **Точка пространства** | Конкретное место внутри локации | Конференц-зал на 42-й улице, угол 5-й авеню |

**Аналогия:**
- Локация = город
- Точка пространства = адрес здания и номер комнаты

---

## Отличие мира от сеттинга

| Понятие | Описание | Примеры |
|---------|----------|---------|
| **Мир** | Фундаментальные константы реальности | Законы физики, базовые социальные правила |
| **Сеттинг** | Историко-культурный контекст | Современная Америка, Древний Египет, Люденс 2025 |

**Пример:**
- **Мир:** `earth_game` (обычная физика, нельзя сквозь стены)
- **Сеттинг:** `modern_usa_2025` (спецслужбы, военные, современные технологии)

---

## Группировка сцен

Несколько сцен могут происходить:
- **В одной точке пространства** (например, 3 сцены в конференц-зале)
- **С одним набором персонажей**
- **В одной временной последовательности**

Но каждая сцена = отдельный файл с полными метаданными.

**Минимум:** 1 сцена на одно место действия.
**Нельзя:** 0 сцен (каждое место должно быть показано хотя бы один раз).

---

## Как читается роман

Роман читается **строго последовательно**, сцена за сценой:

```
scene_001.md → scene_002.md → scene_003.md → ...
```

Это аналогично тому, как браузер читает HTML-код:

```html
<scene id="001">...</scene>
<scene id="002">...</scene>
<scene id="003">...</scene>
```

---

## Workflow написания сцены

### 1. Подготовка
Прежде чем писать сцену:

- ✅ Проверьте [timeline.md](./state/timeline.md) - когда происходит действие
- ✅ Проверьте [character_states.md](./state/character_states.md) - в каком состоянии персонажи
- ✅ Проверьте [investigation_progress.md](./state/investigation_progress.md) - что уже известно

### 2. Создание черновика
- Скопируйте [scene_template.md](./templates/scene_template.md)
- Заполните метаданные
- Напишите текст сцены

### 3. Проверка консистентности
- Соответствуют ли действия персонажей их описаниям?
- Не нарушены ли константы мира?
- Логично ли развитие сюжета?

### 4. Обновление состояния
После написания сцены обновите:
- [timeline.md](./state/timeline.md) - добавьте событие
- [character_states.md](./state/character_states.md) - обновите состояния
- [investigation_progress.md](./state/investigation_progress.md) - если есть прогресс

### 5. Pull request
Предложите включить сцену в канон через pull request.

---

## Примеры сцен

### Пример 1: Сцена с действием

```markdown
---
scene_id: 002
timestamp: "День 1, 15:00 - первое наблюдение поля"
world: earth_game
setting: modern_usa_2025
location: Santa Cruz
space: field_boundary
characters:
  - rescue_team_leader
  - civilian_family
objects:
  - rubber_boat
  - water_wall
  - protective_field
---

# Сцена 2: Первое прикосновение к полю

Резиновая лодка спасателей приблизилась к границе странной зоны.
Капитан вытянул руку вперёд, и его ладонь коснулась невидимого барьера.

— Тёплое, — пробормотал он. — Как стекло, но... живое?

Он надавил сильнее. Рука прошла сквозь барьер, словно сквозь воду.
Лодка качнулась — и провалилась вниз, на сухую землю по другую сторону.

Семья беженцев в лодке вскрикнула от неожиданности...
```

### Пример 2: Сцена с диалогом

```markdown
---
scene_id: 025
timestamp: "День 180, первая встреча с КД"
world: earth_game
setting: modern_usa_2025
location: New York
space: manhattan_conference_room
characters:
  - lead_investigator
  - military_commander
  - senior_officer_kd
  - specialist_kd
objects:
  - conference_table
  - surveillance_bugs
---

# Сцена 25: Первые вопросы

Главный следователь сделал паузу, оглядывая трёх "гостей".

— Кто вы? Откуда?

Старший из троих спокойно улыбнулся.

— Мы представители цивилизации, которая существует гораздо дольше вашей.
На вашей планете действуют преступники из нашего мира. Нам нужна ваша помощь.

— Почему мы должны вам верить?

Все жучки в комнате одновременно отключились. Через пять секунд включились обратно.

— Потому что у вас нет выбора, — сказал Старший без тени надменности.
```

---

## Константы vs Переменные

### Константы (не меняются в сцене)
- Законы физики мира
- Правила сеттинга
- Базовые характеристики персонажей

### Переменные (меняются по ходу сцены)
- Эмоциональное состояние персонажа
- Знание фактов
- Местоположение объектов

**Пример:**

**Константа:** Персонаж не может пройти сквозь стену (физика `earth_game`)

**Переменное:** Персонаж узнал о существовании "чужих" (изменение знаний)

---

## Частые ошибки

### ❌ Неполные метаданные
```markdown
---
scene_id: 001
location: New York
---
```
Не хватает: timestamp, world, setting, space, characters, objects

### ❌ Слишком много объектов
```markdown
objects:
  - table
  - chair
  - cup
  - pen
  - paper
  - lamp
  - window
  - door
  - carpet
  - ...
```
Перечисляйте только **значимые** для сюжета объекты.

### ❌ Нарушение констант мира
```markdown
Персонаж прошёл сквозь стену.
```
В мире `earth_game` это невозможно (если только это не аномалия).

### ❌ Несоответствие состоянию персонажа
```markdown
Следователь всё ещё не знал о "чужих".
```
Но в [character_states.md](./state/character_states.md) указано, что на этот момент он уже знает.

---

## См. также

- [/templates/scene_template.md](./templates/scene_template.md) - Шаблон для копирования
- [/story/](./story/) - Готовые сцены романа
- [/state/](./state/) - Текущее состояние мира и персонажей
- [README.md](./README.md) - Общее описание проекта
